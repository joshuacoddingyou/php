//>>built
define("manager/Lookup",["dojo/_base/declare"],function(h){return h("Manager.Lookup",[],{context:null,url:"",handle:null,constructor:function(){this.obj=this},setContext:function(a){this.context=a},start:function(){this.url=this.context.action+"?__lookupName\x3d"+this.context.name;if(""!=this.context.filter)for(var a=this.context.filter.split(","),f=0;f<a.length;f++){var b=a[f];if("none"!=b){if(field=dijit.byId(b))var e=field.get("value");else field=manager.getElementById(b),e=escape(field.value);
this.url=this.url+"\x26"+b+"\x3d"+e}}this.handle=dojo.subscribe(this.context.name,this,this.deliver);this.context.autocomplete?this.autocomplete():this.open()},open:function(){var a=this.context.name;manager.getWindow(a)||manager.addWindow(a);manager.getWindow(a).setHref(this.url);manager.getWindow(a).open()},autocomplete:function(){(new manager.Ajax({url:this.url,response_type:"TEXT",parameters:{name:this.context.name,__ISAJAXCALL:"yes"},callback_function:function(a,f){var b=f.args.content.name;
eval(b).deliver(b,0,a)}})).call()},deliver:function(a){related=this.obj.context.related;for(var f=/(.*):([^:]*)/,b=related.split(","),e=0;e<b.length;e++){var d=f.exec(b[e])||[b[e],b[e]],g=a[d[2]?d[2]:d[1]];if("none"!=d[1]){var c=dijit.byId(d[1]);null!=c?"Manager.DateTextBox"===c.declaredClass?(d=g.split("/"),c.set("value",d[2]+"-"+d[1]+"-"+d[0])):c.set("value",g):(c=manager.getElementById(d[1]),null!=c&&(c.value=g,c=manager.getElementById(c.name+"_sel"),null!=c&&(c.value=g)))}}dojo.unsubscribe(this.handle);
manager.getWindow(this.obj.context.name).close()}})});
//@ sourceMappingURL=Lookup.js.map