//>>built
define("manager/EditMask",["dojo/_base/declare"],function(h){return h("Manager.EditMask",[],{version:"0.1",h1:null,h2:null,h3:null,h4:null,constructor:function(a,b,c,d){this.element=manager.getElementById(a);null!=this.element&&(this.mask=b,this.errMsg=""!=d?d:"Caracter inv\u00e1lido!",this.optional=c,b=this.element.value?this.filterStrip(this.element.value):"",this.element.value=this.fillMask(b),this.fcolor=""==this.element.style.color?"black":a.style.color,this.first=!0,this.element.editMask=this,
this.h1=dojo.connect(this.element,"keypress",this,this.process),this.h2=dojo.connect(this.element,"focus",this,this.onEnter),this.h3=dojo.connect(this.element,"submit",this,this.onSubmit))},onEnter:function(a){element=a.target;element.editMask.color=element.style.color;element.editMask.first=!0;a=element.value?element.editMask.filterStrip(element.value):"";element.value=element.editMask.fillMask(a)},onExit:function(a){element=a.target;(a=element.editMask.canBlur(element))?(dojo.disconnect(element.editMask.h4),
element.editMask.first=!0):element.focus();return a},canBlur:function(a){var b=a.editMask.filterExit(a.value),c=!0;a.editMask.optional||(c=b.length==a.editMask.mask.length);c?(a.value=b,a.style.color=a.editMask.fcolor):(a.style.color="red",a.focus());return c},onError:function(a){alert(a)},onSubmit:function(){this.element.value=this.filterExit(this.element.value);return!0},process:function(a){element=a.target;keyCode=0!=a.charCode?a.charCode:a.keyCode;editMask=element.editMask;element.editMask.first&&
(element.editMask.h4=dojo.connect(element,"blur",element.editMask,element.editMask.onExit),element.editMask.first=!1);filter=editMask.filterStrip(element.value);var b="";if(9==keyCode)return!0;8==keyCode&&0!=filter.length?filter=filter.substring(0,filter.length-1):b=47<keyCode&&122>keyCode&&filter.length<editMask.filterMax()?filter+String.fromCharCode(keyCode):filter;var c="",c=(b=editMask.validateMask(b))?editMask.fillMask(b):editMask.fillMask(filter);element.value=c;a.preventDefault();return!1},
filterStrip:function(a){mask=this.mask;for(var b=0;b<mask.length++;b++){var c=mask.charAt(b);this.isEditChar(c)&&(mask=this.filterReplace(mask,mask.substring(b,b+1),""))}filterMask=mask+"_";for(b=0;b<filterMask.length++;b++)a=this.filterReplace(a,filterMask.substring(b,b+1),"");return a},filterMask:function(a){filterMask="_";for(var b=0;b<filterMask.length++;b++)a=this.filterReplace(a,filterMask.substring(b,b+1),"");return a},filterMax:function(){filterTemp=this.mask;for(var a=0;a<this.mask.length+
1;a++){var b=this.mask.charAt(a);this.isEditChar(b)||(filterTemp=this.filterReplace(filterTemp,b,""))}return filterTemp.length},filterExit:function(a){mask=this.mask+"_";for(var b=!0,c=0;c<a.length;c++)b=b&&"_"!=a.charAt(c);if(!b)for(;0<a.length&&-1<mask.indexOf(a.charAt(0));)a=a.substr(1);return a},filterReplace:function(a,b,c){var d=a.length,e=b.length;if(0==d||0==e)return a;var f=a.indexOf(b);if(!f&&b!=a.substring(0,e)||-1==f)return a;var g=a.substring(0,f)+c;f+e<d&&(g+=this.filterReplace(a.substring(f+
e,d),b,c));return g},isEditChar:function(a){switch(a){case "_":case "#":case "a":case "A":case "l":case "L":return!0;default:return!1}},displayMaskChar:function(a){return this.isEditChar(a)?"_":a},displayMask:function(a){for(var b="",c=0;c<a.length;c++)b+=this.displayMaskChar(a.substr(c,1));return b},validateMask:function(a){for(var b=!0,c=this.mask.length-1,d=posmask=0,e=a.length-1,f="";d<=e&&posmask<=c;){var g=this.mask.charAt(posmask),h=a.charCodeAt(d);if(this.isEditChar(g)){g=this.isInsertOK(h,
g);if(b=b&&null!=g)f+=String.fromCharCode(g);else this.onError(this.errMsg);d+=1}posmask+=1}return b?f:null},fillMask:function(a){for(var b="",c=a.length-1,d=this.mask.length-1;0<=d;){var e=this.mask.charAt(d);if(0<=c){var f=a.charAt(c);this.isEditChar(e)?(b=f+b,c-=1):b=e+b}else b=this.isEditChar(e)?"_"+b:e+b;d-=1}return b},isInsertOK:function(a,b){switch(b){case "_":return!0;case "#":return this.checkDigit(a);case "a":return this.checkAlphaNumeric(a);case "A":return this.checkUpCaseAlphaNumeric(a);
case "l":return this.checkAlpha(a);case "L":return this.checkUpCaseAlpha(a)}return!1},checkDigit:function(a){return 48<=a&&57>=a?a:null},checkAlpha:function(a){return 65<=a&&90>=a||97<=a&&122>=a?a:null},checkUpCaseAlpha:function(a){return 65<=a&&90>=a?a:97<=a&&122>=a?a-32:null},checkAlphaNumeric:function(a){return 65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a?a:null},checkUpCaseAlphaNumeric:function(a){return 65<=a&&90>=a?a:97<=a&&122>=a?a-32:48<=a&&57>=a?a:null}})});
//@ sourceMappingURL=EditMask.js.map