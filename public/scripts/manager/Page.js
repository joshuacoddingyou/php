//>>built
define("manager/Page","dojo/_base/declare dojo/_base/lang dojo/_base/window dojo/_base/array dijit/registry dojo/dom-construct dojo/dom-form dojo/i18n!./nls/messages manager/Base64 dojox/widget/Standby".split(" "),function(g,l,h,m,d,k,n,p,q,r){return g("Manager.Page",[],{version:"1.1",ajaxEvent:"no",fileUpload:"no",layout:"default",element:"",mainElement:"centerPane",template:"base",eventTarget:"",i18n:p,standby:"",callbackFunction:"",constructor:function(){this.obj=this},getContent:function(b){var a=
{__LAYOUT:manager.page.layout,__ELEMENT:manager.page.element,__TEMPLATE:manager.page.template,__ISFILEUPLOAD:manager.page.fileUpload,__ISAJAXEVENT:manager.page.ajaxEvent,__EVENTTARGET:manager.page.eventTarget},c={};b&&(c=n.toObject(b));return l.mixin(a,c)},get:function(b,a){""==a&&(a=this.mainElement);d.byId(a).set("href",b)},page:function(b){manager.disconnect();h.location=b},ajax:function(b,a,c){var d=this.fileUpload;this.setBusy(c);this.ajaxEvent="yes";this.template="ajax";this.fileUpload="no";
this.callbackFunction=a;(new Manager.Ajax({url:b,form:c,content:manager.page.getContent(c),response_type:"JSON",callback_function:manager.page.callbackFunction})).call();this.fileUpload=d},ajaxText:function(b,a,c){var d=this.fileUpload;this.setBusy(c);this.ajaxEvent="yes";this.template="ajax";this.fileUpload="no";var e=this.element;this.element=a;(new Manager.Ajax({url:b,form:c,content:manager.page.getContent(c),response_type:"JSON",callback_function:manager.page.callback})).call();this.element=e;
this.fileUpload=d},postback:function(b){if(b){this.setBusy(b);this.element=manager.getLayoutElement(b);var a=manager.getElementById("__ISFILEUPLOADPOST");this.fileUpload=null!=a?a.value:this.fileUpload}a=d.byId(b).get("action");(new Manager.Ajax({url:a,form:b,content:manager.page.getContent(b),response_type:"JSON",callback_function:manager.page.callback})).call()},callback:function(b,a){manager.page.updateElement(a.args.content.__ELEMENT,b);manager.page.clearBusy()},updateElement:function(b,a){if(a.base64){var c=
(new q).decode(a.base64);a=eval("("+c+")")}if(a.data){var c=a.data,f=a.id;if("page"==a.type){""==b&&(b="__updateElement");var e=d.byId(b);e||(e=k.create("div"),e.id=b,k.place(e,h.body(),"last"),e=new Manager.ElementPane({content:c},b));try{m.forEach(e.getDescendants(),function(a){d.byId(a.id)&&a.destroyRecursive()}),e.setContent(c)}catch(g){}}"prompt"==a.type&&manager.doPrompt(f,c);"window"==a.type&&manager.doWindow(a.data);"file"==a.type&&manager.doFile(a.data,f);manager.onLoad[f]&&manager.onLoad[f].apply()}},
setBusy:function(b){var a=manager.getElementById("useSetBusy");a&&"no"==a.value||(d.byId("page_standby")&&this.clearBusy(b),this.standby=new r({target:b,id:"page_standby",text:this.i18n.PLEASE_WAIT}),document.body.appendChild(this.standby.domNode),this.standby.startup(),this.standby.show())},clearBusy:function(){d.byId("page_standby")&&(d.byId("page_standby").hide(),d.byId("page_standby").destroy())}})});
//@ sourceMappingURL=Page.js.map